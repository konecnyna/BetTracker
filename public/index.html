<!DOCTYPE html>
<html ng-app ="myApp">
    <head>
        <title>AngularJS Basic Example</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <script type='text/javascript' src="lib/angular.min.js" charset="UTF-8"></script>       
        <script type='text/javascript' src="app.js" charset="UTF-8"></script>
        <script type='text/javascript' src="app/cardController.js" charset="UTF-8"></script>
        <script type='text/javascript' src="app/picksController.js" charset="UTF-8"></script>    
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/css/materialize.min.css">
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/js/materialize.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div ng-include="'app/app.html'"></div> 
            <!-- <div ng-include="'app/picks.html'"></div>             -->
            
            <div class="row center">
                <button data-target="modal1" class="btn modal-trigger">Edit Picks</button>
            </div>
            
            <!-- Modal Structure -->
            <div id="modal1" class="modal modal-fixed-footer" ng-controller="picksCtrl">
                 <div class="modal-content">
                    <textarea id="json-picks">{{picks}}</textarea>                    
                 </div>
                 <div class="modal-footer">
                    <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Done</a>
                 </div>
            </div>

        </div>
    </body>

    <script>
       $(document).ready(function() {
         // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
        //$('.modal-trigger').leanModal();
        $('.modal-trigger').leanModal({
              dismissible: true, // Modal can be dismissed by clicking outside of the modal
              opacity: .5, // Opacity of modal background
              in_duration: 300, // Transition in duration
              out_duration: 200, // Transition out duration
              ready: function() {}, // Callback for Modal open
              complete: function() {                
                //var jsonObj = JSON.parse();
                var jsonData = encodeURIComponent($('#json-picks').text());
                $.get("api/v1/update_picks?picks="+jsonData, function( data ) {});              
              }        
       });


       });



       //encodeURIComponent(
    </script>
</html>
 